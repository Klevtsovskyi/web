<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>T02 A03</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    #table td {
        background-color: pink;
        cursor: pointer;
    }
    #table td.active {
        background-color: darkturquoise;
    }
    #table td:hover {
        background-color: deeppink;
    }
    #table td.remove-row {
        background-color: darkred;
        color: white;
    }
    #table td.add-cell, #table td.add-row {
        background-color: darkgreen;
        color: white;
    }


  </style>
</head>
<body>
  <div class="container">
    <label class="form-label" for="text">Text</label>
    <input class="form-control" type="text" id="text">
    <br>
    <button class="btn btn-warning" id="clear">Clear</button>
    <button class="btn btn-success" id="replace">Replace</button>
    <button class="btn btn-danger" id="remove">Remove</button>
  </div>

  <br>

  <div class="container">
  <table id="table">
    <tbody>
      <tr>
        <td class="remove-row"><i class="fa-solid fa-trash"></i></td>
        <td class="add-cell"><i class="fa-solid fa-plus"></i></td>
        <td class="cell">ABC</td>
        <td class="active cell">123</td>
        <td class="cell">ZXC</td>
      </tr>
      <tr>
        <td class="remove-row"><i class="fa-solid fa-trash"></i></td>
        <td class="add-cell"><i class="fa-solid fa-plus"></i></td>
        <td class="cell">QWE</td>
      </tr>
      <tr>
        <td class="remove-row"><i class="fa-solid fa-trash"></i></td>
        <td class="add-cell"><i class="fa-solid fa-plus"></i></td>
      </tr>
      <tr>
        <td class="add-row"><i class="fa-solid fa-circle-plus"></i></td>
      </tr>
    </tbody>
  </table>
  </div>

  <script>

    function addCell(el) {
        const tr = el.parentElement;
        const td = document.createElement("td");
        td.textContent = "New";
        td.classList.add("cell");

        td.addEventListener("click", function() {
          td.classList.toggle("active");
        });

        tr.append(td);
    }

    function addRow() {
        const tr = document.createElement("tr");
        let td;

        td = document.createElement("td");
        td.classList.add("remove-row");
        td.innerHTML = "<i class=\"fa-solid fa-trash\"></i>";

        td.addEventListener("click", function() {
          tr.remove();
        });

        tr.append(td);

        td = document.createElement("td");
        td.classList.add("add-cell");
        td.innerHTML = "<i class=\"fa-solid fa-plus\"></i>";

        td.addEventListener("click", function () {
            addCell(td);
        });

        tr.append(td);

        $(".add-row").parent().before(tr);
    }

    function main() {
      $("td.cell").on("click", function() {
          this.classList.toggle("active");
      });
      $("#clear").on("click", () => {
          $("td.cell").removeClass("active");
      });
      $("#replace").on("click", () => {
          const text = $("#text").val();
          $("td.cell.active").text(text);
      });
      $("#remove").on("click", () => {
         $("td.cell.active").remove();
      });

      $("td.remove-row").on("click", function() {
          this.parentElement.remove();
      });
      $("td.add-cell").on("click", function() {
          addCell(this);
      });
      $("td.add-row").on("click", addRow);

    }

    main();
  </script>
</body>
</html>